# TUTORIAL
Содержит первую версию статического анализатора кода 1С с 1 проверкой на разыменование поля, полученного из выборки.  
Все написано на чистом C, в файлах идет построчное комментирование кода, для тех, кто только начинает изучать Си.
Я решил, что лучшее, что может быть для вступления в проект - это увидеть первоначальную версию с полным и подробнейшим ее описанием.
## Необходимая литература
* Брайан Керниган, Д.Ритчи "Язык программирования Си (читать все)  
* Alfred V. Aho "Компиляторы" (читать до 5 главы включительно)  
* Генератор лексических анализаторов [re2c](https://re2c.org/manual/manual_c.html) (читать все)  
* Генератор синтаксических анализаторов [bison](https://www.gnu.org/software/bison/manual/bison.html) (читать все)  
## Содержимое файлов
- lex.l - содержит описание правил формирования лексического анализатора re2c (формат называется Lex)  
- syn.y - содержит описание правил формирования синтаксического анализатора bison(формат называется YACC)  
- main.h - заголовочный файл, используемый везде, в нем описаны общие функции и глобальные переменные  
- main.c - основной файл, в котором реализованы функции по работе с хэш-таблицами, проверки кода,
в общем там все что делается вручную.  
## С чего начать
Если вы не знаете языка Си, то нужно прочитать первую книгу обязательно, прежде чем что-либо дальше читать.

Далее, чтобы понять содержимое файлов *lex.l* и *syn.y* - вам нужно прочитать 2 документации по генераторам кода (лексического и синтаксического).

Если вы не знаете, что такое представляют эти генераторы кода в теории, то вам нужно прочитать до 5-й главы включительно книгу по компиляторам. Там примеры кода на Java, но все там относится к механизмам для Си (Lex и YACC).  
т.к. Lex и YACC уже устарели, но принципы остались прежними, их заменили re2c и bison(есть и другие, но я использовал эти)
## Платформа
Я писал код в **Linux Ubuntu** и тестировал тоже в ней.  
Для windows адаптации не делал(не умею и нет пока времени).
Все необходимые тесты и проверки запускают с помощью команды make.  
Это программа, которая считывает содержимое файла **Makefile** и на основании параметров запуска делает те или иные действия.  
Это традиционная команда сборки программ на Си, тем более что она максимально простая(информации в интернете полно)  
Можно запус кать **make** прямо из каталога **tutorial** и будет происходить сборка проекта.
Удаление генерируемых файлов осуществляется командой **make clean**(это можно увидеть в самом **Makefile**)  
Проверки на качество кода и утечки памяти запускаются программами, которые доступны в Linux Ubuntu(как их установить и запустить написано на главной странице проекта в файле README.md)  
## Подсказки
При построчном описании tutorial, я увидел ошибк:  
1. При вызове destroy_lex не все глобальные переменные сбрасываются на значения по умолчанию  
2. Отсутствует грамматика в файле syn.y, которая бы анализировала конструкции вида:  
**Переменная1 = Неопределено;**  
Я **намеренно** не стал исправлять ошибки, чтобы при прочтении *tutorial* можно было практиковаться.
3. Отсутствует грамматика для **массивов**
4. Отсутствует грамматика остатка от деления **'%'     **
5. Забыл закрыть файловый дескриптор

Удобно запустать тесты в лог файл, например так:  
**make >log 2>log**  
**>log** обозначает, что обычные сообщения отправлять в файл с именем **log**(если его нет, то он создастся)  
**2>log** обозначает, что сообщения об ошибках отправлять в файл с именем **log**(если его нет, то он создастся)  


